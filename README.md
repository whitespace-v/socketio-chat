# Socket.IO Chat
## Как использовать

$ npm i
$ npm start

Выберите в своем браузере пункт http://localhost:3000. 
При необходимости укажите порт, указав переменную PORT env.


1. index.js
Инициализация: Сервер на Express и Socket.IO запускается на порту 3000. Он обслуживает статические файлы из папки public, где находится клиентская часть приложения.

Управление пользователями:
При подключении нового клиента 'connection'(20) сервер ожидает событие 'add user'. Получив имя пользователя, он сохраняет его в сессии сокета, увеличивает глобальный счетчик пользователей (numUsers) и уведомляет всех участников о присоединении нового пользователя с помощью события 'user joined'(44).

Обработка сообщений:
Событие 'new message'(26) от клиента переправляет  всем остальным подключенным пользователям socket.broadcast.emit (26), чтобы они могли увидеть сообщение. События 'typing' и 'stop typing' также транслируются, чтобы остальные пользователи видели индикатор набора текста. При отключении клиента 'disconnect', сервер уменьшает numUsers и оповещает остальных участников о том, что пользователь покинул чат, отправляя событие 'user left'.

2. main.js
Клиентский скрипт, написанный с использованием jQuery, отвечает за взаимодействие с пользователем и отображение информации.

Вход в чат:
При загрузке страницы пользователь видит форму для ввода имени. После ввода имени и нажатия Enter, клиент отправляет на сервер событие 'add user'. При успешном входе 'login' отображается интерфейс чата.

Обмен данными:
Клиент отправляет сообщение на сервер используя 'new message'. Он также прослушивает события от сервера: 'new message', 'user joined', 'user left', 'typing', 'stop typing'.

Визуализация:
Для каждого пользователя генерируется уникальный цвет на основе его имени, что помогает быстро идентифицировать отправителя. Сообщения о входе и выходе пользователей, а также индикаторы набора текста, динамически добавляются в интерфейс чата.



Описание обменов данных: 
'new message' - Главное событие для отправки и получения сообщений. Когда клиент отправляет сообщение, сервер пересылает его всем остальным участникам чата.
'user joined' - Сервер отправляет это событие всем пользователям, чтобы сообщить о подключении нового участника. Оно включает имя нового пользователя и общее количество людей в чате.
'user left' - Это событие сообщает об уходе пользователя. Сервер рассылает его, чтобы другие участники знали, что кто-то покинул чат.
'typing' и 'stop typing' - Клиент отправляет typing, когда начинает печатать, и stop typing, когда заканчивает. Сервер просто передает эти события другим клиентам, которые отображают или скрывают соответствующий индикатор.

'connection' - Сервер прослушивает это событие, чтобы определить, когда новый клиент устанавливает соединение. Это начальная точка взаимодействия.
'add user' - Клиент отправляет это событие на сервер, чтобы сообщить свое имя. Это событие инициирует процесс входа в чат. 
'login' - Сервер отправляет это событие обратно клиенту, который только что вошел. Это подтверждает успешный вход и предоставляет информацию о текущем количестве участников.
'disconnect' - Сервер прослушивает это событие, когда клиент отключается. Это позволяет обновить список пользователей и уведомить чат о потере соединения.
